<script lang="ts">
  import type { PackageProps, SelectPackageAction } from "../../data/entities";
  import Stack from "../stack/Stack.svelte";

  const {
    stack,
    package_id,
    labels,
    id,
    onAction,
    purchaseState,
  }: PackageProps = $props();

  const onPackageClick = (evt: MouseEvent) => {
    evt.preventDefault();
    evt.stopPropagation();
    onAction &&
      onAction({ type: "select_package" } as SelectPackageAction, {
        packageId: package_id,
      });
  };

  const isSelected = $derived(purchaseState?.selectedPackageId === package_id);
</script>

<div class="package" class:selected={isSelected} {id} onclick={onPackageClick}>
  <Stack {...stack} {labels} {onAction} {purchaseState} />
</div>

<style>
  .package {
    width: 100%;
    display: flex;
    cursor: pointer;
  }

  .selected {
  }
</style>
