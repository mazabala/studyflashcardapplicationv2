<script lang="ts">
  import { getTextComponentStyles } from "./text-utils";
  import type { TextProps } from "../../data/entities";
  import { getLabelById, stringifyStyles } from "../../utils";

  const { id, labels, text_lid, purchaseState, ...restProps }: TextProps =
    $props();

  const { tagToRender, textStyles } = $derived(
    getTextComponentStyles({
      id,
      labels,
      text_lid,
      purchaseState,
      ...restProps,
    }),
  );
  const stylesString = $derived(stringifyStyles(textStyles));

  const label = $derived(
    getLabelById(
      text_lid,
      purchaseState.locale,
      purchaseState.defaultLocale,
      labels,
    ),
  );
</script>

<svelte:element this={tagToRender} {id} style={stylesString} class="text-block">
  {label}
</svelte:element>

<style>
  .text-block {
    padding-block-start: var(--padding-block-start, unset);
    padding-inline-end: var(--padding-inline-end, unset);
    padding-block-end: var(--padding-block-end, unset);
    padding-inline-start: var(--padding-inline-start, unset);
    margin-block-start: var(--margin-block-start, unset);
    margin-inline-end: var(--margin-inline-end, unset);
    margin-block-end: var(--margin-block-end, unset);
    margin-inline-start: var(--margin-inline-start, unset);
    color: var(--text-color, #ffffff);
    background-color: var(--background-color, #ffffff);
    font-size: var(--font-size, 1rem);
    font-weight: var(--font-weight, normal);
    text-align: var(--text-align, center);
    height: var(--height, unset);
    width: var(--width, unset);
    font-family: var(--font-family, sans-serif);
  }
</style>
